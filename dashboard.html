<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Note Keep</title>
		<!-- Google Font -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
		<!-- Huge Icons -->
		<link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />
		<style type="text/css">
			body {
				font-family: "Plus Jakarta Sans";
				background-color: #F8FBFC;
			}
			.container {
				margin-top: 20px;
				margin-bottom: 20px;
				width: 390px;
				margin-left: auto;
				margin-right: auto;
			}
			.judul{
				display: flex;
				align-items: center;
				justify-content: space-between;
			}
			.judul-teks{
				font-weight: bold;
			}
			.judul-teks p{	
				color: #777777;
				font-size: 10pt;			
				margin-bottom: 0;
			}
			.judul-teks h2{
				margin-top: 0;
				font-size: 16pt;
			}
			.logo-keluar{
				font-size: 30px;
			}
			.header{
				background-color: white;
				margin-top: 35px;
				padding-bottom: 15px;
			}
			.form-header{
				display: flex;
				align-items: center;
			}
			.form-header span{
				font-size: 12px;
				font-weight: bold;
			}
			.logo-create{
				font-size: 30px;
				padding: 10px;
				color: #19C3E6;
			}
			.input{
				margin-top: 10px;
				margin-left: 10px;
				margin-right: 10px;
			}
			.input-title{
				width: calc(100% - 23px);
				height: 45px;
				padding-left: 10px;
				padding-right: 10px;
				border: 2px solid #C4C4C4;
				border-radius: 8px;
				margin-bottom: 10px;
				color: #7E7E7E;
			}
			.input-note{
				width: calc(100% - 23px);
				height: 100px;
				padding-top: 10px;
				padding-left: 10px;
				padding-right: 10px;
				border-radius: 8px;
				border: 2px solid #C4C4C4;
				color: #7E7E7E;
				resize: vertical;
			}
			.btn-add-note {
		      background-color: #19c3e6;
		      color: white;
		      font-weight: bold;
		      border: none;
		      display: block;
		      margin: auto;
		      margin-top: 20px;
		      width: 100%;
		      padding: 8px;
		      border-radius: 5px;
		    }
		    .your-notes{
		    	padding-top: 15px;
		    }
		    .your-notes h2{
		    	font-size: 16pt;
		    	font-weight: bold;
		    }
		    .note-slot-one{
		    	background-color: white;
		    	margin-bottom: 10px;
		    	margin-top: 10px;
		    }
		    .header-slot-one{
		    	justify-content: space-between;
		    	align-items: center;
		    	display: flex;
		    }
		    .left-header-slot-one{
		    	padding-left: 10px;
		    }
		    .left-header-slot-one h3{
		    	margin-bottom: 0px;
		    	font-size: 14pt;
		    	font-weight: bold;
		    }
		    .left-header-slot-one label{
		    	color: #4E8B97;
		    	font-size: 9pt;
		    }
		    .right-header-slot-one{
		    	padding-right: 10px;
		    	font-size: 20px;
		    }
		    .text-slot-one{
		    	padding: 10px;
		    }
		    .text-slot-one p{
		    	font-size: 12pt;
		    	text-align: left;
		    }
		   
		</style>
	</head>
	<body>
		<div class="container">
			<div class="judul">
				<div class="judul-teks">
					<p>DASHBOARD</p>
					<h2>Hi, student@uni.edu</h2>
				</div>
				<i onclick="logout()" class="hgi hgi-stroke hgi-logout-circle-02 logo-keluar"></i>
			</div>
			<div class="header">
				<div class="form-header">
					<i class="hgi hgi-stroke hgi-property-edit logo-create"></i>
					<span id="span-create" >Create New Note</span>
				</div>
				<div class="input">
					<input id="judul-catatan" type="text" placeholder="Note title" class="input-title">
					<textarea id="konten-catatan" class="input-note" placeholder="Write your thoughts here..."></textarea>
					<button id="btn-add" onclick="tambahCatatan()" class="btn-add-note">+ Add Note</button>
				</div>
			</div>
			<div class="your-notes">
				<h2>Your Notes</h2>
				<div id="wadah">
					
				</div>		
			</div>
		</div>

	<script type="text/javascript">
		let onEdit = null;
		let sedangEdit = false;
		let daftarCatatan = [];

		function hapusCatatan(index) {
			if(sedangEdit) return alert("Harap selesaikan edit");
			daftarCatatan.splice(index, 1)
			tampilkanCatatan();
		}

		function editCatatan(index) {
			sedangEdit = true;
			onEdit = index;

			let btnAddNote = document.getElementById("btn-add");
			let spanCreate = document.getElementById("span-create");

			let inTitle = document.getElementById("judul-catatan");
		    let inContent = document.getElementById("konten-catatan");

		    inTitle.value = daftarCatatan[index].judul;
		    inContent.value = daftarCatatan[index].konten;

		    btnAddNote.innerText = 'Save';
		    spanCreate.innerText = 'Editing note';
		}

		// function
		function tambahCatatan() {
			// ambil DOM

		    let inTitle = document.getElementById("judul-catatan");
		    let inContent = document.getElementById("konten-catatan");

		    if(!inTitle.value) return alert("Judul tidak terisi!");
		    if(!inContent.value) return alert("Catatan tidak terisi!");

		    let date = new Date(); 
			let dd = date.getDate(); 
			let mm = date.getMonth() + 1; 
			let yyyy = date.getFullYear(); 
			let newDate = dd + "-" + mm + "-" +yyyy; 
      
      		if(sedangEdit) {
      			
      			daftarCatatan[onEdit].judul = inTitle.value;
      			daftarCatatan[onEdit].konten = inContent.value;
      			daftarCatatan[onEdit].tanggal = newDate;
				// panggill tampilkanCatatan
				

				alert("Catatan berhasil diubah!");


				let btnAddNote = document.getElementById("btn-add");
				let spanCreate = document.getElementById("span-create");
				btnAddNote.innerText = '+ Add Note';
		   		spanCreate.innerText = 'Create New Note';
		   		sedangEdit = false;
		   		onEdit = null;
		   		tampilkanCatatan();
      		}
      		else {
      			// masukin ke array
			    let newCatatan = {
			        judul: inTitle.value,
			        konten: inContent.value,
			        tanggal: newDate
			    }
			    daftarCatatan.push(newCatatan);

				// panggill tampilkanCatatan
				tampilkanCatatan();

				alert("Catatan berhasil dibuat!");
      		}
				
		}

		function tampilkanCatatan() {
			//ambill DOM
			let wadah = document.getElementById('wadah');

			wadah.innerHTML = ``;
			for(let i = 0; i < daftarCatatan.length; i++) {
				wadah.innerHTML += `<div class="note-slot-one">
						<div class="header-slot-one">
							<div class="left-header-slot-one">
								<h3>${daftarCatatan[i].judul}</h3>
								<label>${daftarCatatan[i].tanggal}</label>
							</div>
							<div class="right-header-slot-one">
								<i onclick="editCatatan(${i})" class="hgi hgi-stroke hgi-edit-02"> </i>
								<i onclick="hapusCatatan(${i})" class="hgi hgi-stroke hgi-delete-03"></i>
							</div>
						</div>
						<div class="text-slot-one">
							<p>${daftarCatatan[i].konten}</p>
						</div>
					</div>`
			}
			if(!sedangEdit)
			{
				let inTitle = document.getElementById("judul-catatan");
			    let inContent = document.getElementById("konten-catatan");
			    inTitle.value = null;
			    inContent.value = null;
			}	
		}
		function logout() {
			window.location.href = './index.html';
		}
	</script>

	</body>
</html>